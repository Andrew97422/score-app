<div class="component">
    <div fxLayout="row" fxFlex class="mat-card">
        <div fxFlex fxLayout="column" fxLayoutGap="16px">
            <div fxLayout="row" fxFlex fxLayoutGap="10px" style="overflow: hidden;">
                <div fxLayout="column" fxFlex="2 1 0%">
                    <mat-tab-group fxFlex style="overflow: hidden;">
                        <mat-tab label="Потребительский кредит">                
                            <div fxLayout="column" fxFlex fxLayoutGap="10px">
                                <div *ngFor="let product of consumerProducts" class="product" matRipple
                                    [class.product-active]="product.active"
                                    [class.product-select]="selectProduct?.id == product.id && selectTab == LendingType.CONSUMER"
                                    (click)="selectProduct=product; selectTab = LendingType.CONSUMER">
                                    <li>
                                        <div fxLayout="column" fxFlex>
                                            <div fxFlex fxLayout="row">
                                                <div fxFlex style="font-weight: 500">{{product.name}}</div>
                                                <div style="width: 24px;">
                                                    <mat-icon (click)="editProduct(product, LendingType.CONSUMER)">
                                                        <span class="material-symbols-outlined">
                                                            edit
                                                        </span>
                                                    </mat-icon>
                                                </div>
                                                <div style="width: 24px;">
                                                    <mat-icon (click)="delete(product, LendingType.CONSUMER)">
                                                        <span class="material-symbols-outlined">
                                                            delete
                                                        </span>
                                                    </mat-icon>
                                                </div>
                                            </div>

                                            <div fxLayout="column" fxFlex style="padding-left: 10px;" fxLayoutGap="10px">
                                                <div fxFlex> {{product.comment}} </div>
                                                <div fxLayout="row" fxFlex fxLayoutGap="10px">
                                                    <div fxFlex>До {{product.maxAmount}} ₽</div>
                                                    <div fxFlex>От {{product.minRate}}%</div>
                                                    <div fxFlex>До {{product.maxTerm}} месяцев</div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </div>
                            </div>
                        </mat-tab>

                        <mat-tab label="Ипотека">
                            <div fxLayout="column" fxFlex fxLayoutGap="10px">
                                <div *ngFor="let product of mortgageProducts" class="product" matRipple
                                    [class.product-active]="product.active"
                                    [class.product-select]="selectProduct?.id==product.id && selectTab == LendingType.MORTGAGE"
                                    (click)="selectProduct=product; selectTab = LendingType.MORTGAGE">
                                    <li>
                                        <div fxLayout="column" fxFlex>
                                            <div fxFlex fxLayout="row">
                                                <div fxFlex style="font-weight: 500">{{product.name}}</div>
                                                <div style="width: 24px;">
                                                    <mat-icon (click)="editProduct(product, LendingType.MORTGAGE)">
                                                        <span class="material-symbols-outlined">
                                                            edit
                                                        </span>
                                                    </mat-icon>
                                                </div>
                                                <div style="width: 24px;">
                                                    <mat-icon (click)="delete(product, LendingType.MORTGAGE)">
                                                        <span class="material-symbols-outlined">
                                                            delete
                                                        </span>
                                                    </mat-icon>
                                                </div>
                                            </div>

                                            <div fxLayout="column" fxFlex style="padding-left: 10px;" fxLayoutGap="10px">
                                                <div fxFlex> {{product.comment}} </div>
                                                <div fxLayout="row" fxFlex fxLayoutGap="10px">
                                                    <div fxFlex>До {{product.maxAmount}}₽</div>
                                                    <div fxFlex>От {{product.minRate}}%</div>
                                                    <div fxFlex>До {{product.maxTerm}} месяцев</div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </div>
                            </div>
                        </mat-tab>

                        <mat-tab label="Автокредит">
                            <div fxLayout="column" fxFlex fxLayoutGap="10px">
                                <div *ngFor="let product of autoLoanProducts" class="product" matRipple
                                    [class.product-active]="product.active"
                                    [class.product-select]="selectProduct?.id == product.id && selectTab == LendingType.AUTO_LOAN"
                                    (click)="selectProduct=product; selectTab = LendingType.AUTO_LOAN">
                                    <li>
                                        <div fxLayout="column" fxFlex>
                                            <div fxFlex fxLayout="row">
                                                <div fxFlex style="font-weight: 500">{{product.name}}</div>
                                                <div style="width: 24px;">
                                                    <mat-icon (click)="editProduct(product, LendingType.AUTO_LOAN)">
                                                        <span class="material-symbols-outlined">
                                                            edit
                                                        </span>
                                                    </mat-icon>
                                                </div>
                                                <div style="width: 24px;">
                                                    <mat-icon (click)="delete(product, LendingType.AUTO_LOAN)">
                                                        <span class="material-symbols-outlined">
                                                            delete
                                                        </span>
                                                    </mat-icon>
                                                </div>
                                            </div>

                                            <div fxLayout="column" fxFlex style="padding-left: 10px;" fxLayoutGap="10px">
                                                <div fxFlex> {{product.comment}} </div>
                                                <div fxLayout="row" fxFlex fxLayoutGap="10px">
                                                    <div fxFlex>До {{product.maxAmount}} ₽</div>
                                                    <div fxFlex>От {{product.minRate}}%</div>
                                                    <div fxFlex>До {{product.maxTerm}} месяцев</div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </div>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                </div>

                <div fxFlex>
                    <form *ngIf="selectProduct" fxFlex fxLayout="column" style="overflow: auto;">
                        <h5>{{selectProduct?.name}}</h5>
                        <div>{{selectProduct?.comment}}</div>

                        <div fxLayout="row" fxFlex="100px" fxLayoutAlign="center center" style="font-weight: 600; font-size: 19px;">
                            <div fxLayout="column" fxLayoutAlign="center start" style="padding: 6px;">
                                <div>
                                    От {{selectProduct?.minRate}}%
                                </div>
                                <div style="font-size: 13px;">
                                    Ставка
                                </div>
                            </div>
                            <div fxLayout="column" fxFlex style="border-left: 1px solid; border-right: 1px solid; padding: 6px;" fxLayoutAlign="center start">
                                <div>
                                    От {{selectProduct?.minTerm}} до {{selectProduct?.maxTerm}} мес.
                                </div>
                                <div style="font-size: 13px;">
                                    Срок кредита
                                </div>
                            </div>
                            <div fxLayout="column" fxFlex fxLayoutAlign="center start" style="padding: 6px;">
                                <div>
                                    От {{selectProduct?.minAmount/1000000}} млн до {{selectProduct?.maxAmount/1000000}} млн ₽
                                </div>
                                <div style="font-size: 13px;">
                                    Сумма
                                </div>
                            </div>
                        </div>

                        <div>Период действия: {{selectProduct?.startDate | date:'dd.MM.yyyy'}} - {{selectProduct?.finishDate | date:'dd.MM.yyyy'}}</div>

                        <a [attr.href]="selectProduct?.url">Подробное описание продукта на сайте ПСБ</a>
                        
                    </form>
                </div>
            </div>
         
            <button class="mat-button" mat-button color="primary" (click)="createProduct()">
                Создать кредитный продукт
            </button>
        </div>
    </div>
</div>
