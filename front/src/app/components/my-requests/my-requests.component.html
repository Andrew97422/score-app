<div class="component">
    <div fxLayout="row" fxFlex class="mat-card" style="overflow: hidden; padding-right: 0;"> 
        <div fxFlex fxLayout="column" style="overflow: auto;" fxLayoutGap="10px">
            <ng-container *ngIf="userData?.role == 'USER'">
                <div>
                    <h6>Карты</h6>
                    <div *ngIf="userCards?.length; else noData" fxLayout="row wrap" fxLayoutGap="10px">
                        <div *ngFor="let card of userCards" fxLayout="column" [style.background-color]="card.type == CardType.Debit ? '#212529' : 'rgba(43, 44, 132)'"
                        class="item psb-card" fxLayoutGap="10px" fxFlex="240px">
                            <div fxLayout="row">
                                <div>{{(card.type == CardType.Debit ? 'Дебетовая ' : 'Кредитная ')}}</div>
                                <div fxFlex></div>
                                <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.27835 4.15566L0 7.43442V14.0942V20.7539H3.30811H6.61627L9.85029 17.5195L13.0843 14.2851H13.1286H13.1729V17.4901V20.6951H13.2172H13.2615L16.5398 17.4164L19.8182 14.1377V7.50734V0.876953H16.5101H13.2019L9.9679 4.11138L6.73389 7.3458H6.68955H6.64527V4.11138V0.876953H6.60099H6.55665L3.27835 4.15566ZM13.1729 10.786V14.0499H9.90909H6.64527V10.786V7.52222H9.90909H13.1729V10.786Z" fill="#F8F9FA"/>
                                </svg>
                            </div>
                            
                            <div style="font-size: 20px;">{{ card.amount }} ₽</div>

                            <div fxLayout="row" fxLayoutAlign="center center">
                                <div>
                                    {{ getCardNumber(card.number) }}
                                </div>
                                <div fxFlex></div>
                                <svg width="40" height="12" viewBox="0 0 40 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0.0284302 0.0206981L0 0.0391699L0.00572236 6.01343L0.0114447 11.9877L1.7713 11.9938L3.53116 12L3.58226 11.9878L3.63335 11.9757V8.4523V4.92888L3.74121 4.93079L3.84907 4.93271L3.90076 5.09962L3.95244 5.26654L3.97199 5.3333L3.99157 5.40007L4.05192 5.60037L4.1123 5.80067L4.1366 5.88969L4.1609 5.97871L4.17907 6.03435L4.19725 6.08999L4.3937 6.77991L4.59015 7.46983L4.61131 7.50847L4.6325 7.54712V7.58367V7.62023L4.69172 7.80097L4.75092 7.98171L4.7712 8.03283L4.79145 8.08395V8.13723V8.19051L4.81416 8.20426L4.83687 8.21801V8.26604V8.31405L4.86859 8.40383L4.90029 8.49358L4.92799 8.59373L4.95567 8.69388L4.97311 8.74952L4.99055 8.80516L5.01596 8.89418L5.04137 8.9832L5.14583 9.33929L5.25029 9.69538L5.26841 9.77327L5.28651 9.85117L5.34714 10.0403L5.40779 10.2295L5.42736 10.3074L5.44696 10.3853L5.46846 10.4632L5.48997 10.5411L5.53974 10.6969L5.58952 10.8527L5.61366 10.9417L5.63777 11.0307L5.65755 11.0975L5.67733 11.1642L5.73451 11.3534L5.79169 11.5426L5.81149 11.6094L5.83129 11.6761L5.87121 11.8268L5.91111 11.9774L5.95873 11.9887L6.00632 12L7.22939 11.9939L8.45248 11.9877L8.48128 11.9098L8.51007 11.8319L8.53523 11.7429L8.56039 11.6539L8.59684 11.5315L8.63328 11.4091L8.65127 11.3534L8.66923 11.2978L8.695 11.2088L8.72078 11.1197L8.825 10.7636L8.92921 10.4076L8.95158 10.3297L8.97392 10.2518L8.98568 10.1792L8.99743 10.1067L9.01761 10.0945L9.03782 10.0822V10.0362V9.99009L9.09275 9.82048L9.14766 9.65087L9.1753 9.55072L9.20291 9.45057L9.22528 9.37267L9.24764 9.29478L9.27898 9.22169L9.31032 9.14861V9.1059V9.06319L9.33066 9.01207L9.35101 8.96095L9.37587 8.87193L9.40074 8.7829L9.45524 8.60486L9.50974 8.42682L9.59233 8.1375L9.67489 7.84817L9.71013 7.72577L9.7454 7.60336L9.76366 7.54772L9.78191 7.49209L9.80555 7.40306L9.82919 7.31404L9.88882 7.11374L9.94845 6.91344L9.97 6.86232L9.99155 6.8112V6.75792V6.70464L10.0143 6.69089L10.037 6.67713V6.63291V6.58871L10.0946 6.40611L10.1523 6.22352L10.1767 6.1345L10.2012 6.04548L10.2186 5.98984L10.236 5.9342L10.2759 5.80067L10.3159 5.66714L10.3327 5.6115L10.3496 5.55586L10.3745 5.46684L10.3994 5.37782L10.4634 5.16639L10.5273 4.95496L10.6454 4.94824L10.7635 4.94152L10.7692 8.46461L10.775 11.9877L12.5348 11.9938L14.2947 12L14.3458 11.9878L14.3969 11.9757V6.01112V0.0465146L14.3345 0.0232573L14.272 0L12.3759 0.00781197L10.4798 0.0156239L10.3208 0.0670782L10.1619 0.118556L9.97402 0.197473L9.78616 0.276369L9.64939 0.369664L9.51262 0.462937L9.37928 0.59026L9.24594 0.717561L9.15552 0.833268L9.06512 0.948974L8.98752 1.09363L8.90993 1.2383L8.8671 1.3607L8.82428 1.48311L8.80616 1.50425L8.78804 1.52539V1.59752V1.66965L8.76783 1.68189L8.74764 1.69411L8.73542 1.76666L8.72321 1.83919L8.70281 1.92822L8.68244 2.01724L8.65576 2.06584L8.62908 2.11447V2.17051V2.22657L8.60873 2.27769L8.58839 2.32881L8.56498 2.41784L8.54154 2.50686L8.49517 2.67377L8.4488 2.84069L8.33224 3.2858L8.21568 3.73091L8.19379 3.8088L8.1719 3.8867L8.15174 3.96459L8.13157 4.04249L8.10948 4.13151L8.08738 4.22053L8.02594 4.43196L7.96447 4.64338L7.95375 4.72698L7.94305 4.81059L7.92273 4.82287L7.90243 4.83518V4.88846V4.94174L7.88127 4.99286L7.86008 5.04398L7.82291 5.17752L7.78573 5.31105L7.76584 5.38894L7.74595 5.46684L7.67692 5.72277L7.60788 5.97871L7.54864 6.20127L7.48942 6.42382L7.471 6.50172L7.45261 6.57961L7.41657 6.70202L7.38051 6.82442L7.3569 6.92457L7.33326 7.02472L7.31697 7.04931L7.30067 7.07393L7.19244 7.08557L7.08422 7.09723L7.06946 7.07382L7.0547 7.0504L7.03796 6.9708L7.0212 6.89119L6.98251 6.75766L6.94382 6.62412L6.92204 6.54623L6.90026 6.46833L6.8801 6.39044L6.85993 6.31255L6.83838 6.22352L6.81683 6.1345L6.77814 6.00097L6.73945 5.86744L6.71767 5.78954L6.69589 5.71165L6.67691 5.63375L6.6579 5.55586L6.59589 5.3333L6.53385 5.11075L6.51645 5.03286L6.49908 4.95496L6.41754 4.65451L6.33599 4.35406L6.27798 4.14264L6.21996 3.93121L6.20047 3.84219L6.18099 3.75316L6.12041 3.54174L6.0598 3.33031L6.03977 3.25242L6.01974 3.17452L5.99781 3.0855L5.97587 2.99648L5.9382 2.87407L5.90053 2.75167L5.87963 2.66821L5.85872 2.58475L5.83601 2.49573L5.8133 2.40671L5.7928 2.32325L5.77227 2.23979L5.73335 2.10626L5.69445 1.97273L5.6762 1.89483L5.65794 1.81694L5.61388 1.65002L5.56985 1.48311L5.50713 1.32732L5.44442 1.17153L5.3755 1.04912L5.30656 0.926719L5.22696 0.826569L5.1474 0.726419L5.04321 0.619192L4.93905 0.511966L4.79145 0.404939L4.64385 0.29789L4.44652 0.206153L4.24916 0.114394H4.22439H4.19962L4.0584 0.064519L3.9172 0.014667L1.98703 0.00845719L0.0568605 0.0022481L0.0284302 0.0206981ZM15.9012 0.026084L15.8501 0.0462252L15.8558 6.01695L15.8615 11.9877L17.6274 11.9934L19.3932 11.9991L19.5348 11.9524L19.6765 11.9057L19.8297 11.8374L19.983 11.769V11.7504V11.7318H20.0067H20.0304L20.1486 11.645L20.2669 11.5583L20.3824 11.4391L20.498 11.32L20.5783 11.2199L20.6586 11.1197L20.6961 11.053L20.7336 10.9862L20.7736 10.9194L20.8136 10.8527L20.879 10.6969L20.9443 10.5411L20.9838 10.4521L21.0234 10.363L21.153 10.0515L21.2826 9.73989L21.3113 9.67312L21.34 9.60636L21.3995 9.47779L21.459 9.34919V9.33172V9.31427L21.5044 9.22214L21.5499 9.13002V9.1V9.07L21.5702 9.04886L21.5906 9.02771L21.856 8.39343L22.1214 7.75915L22.1555 7.68126L22.1895 7.60336L22.2475 7.46983L22.3055 7.3363L22.3219 7.29179L22.3384 7.24728L22.3964 7.11374L22.4545 6.98021L22.4983 6.88006L22.5422 6.77991L22.7639 6.24578L22.9857 5.71165L23.0194 5.63375L23.0531 5.55586L23.0932 5.46684L23.1334 5.37782L23.167 5.29992L23.2007 5.22203L23.2305 5.14413L23.2602 5.06624L23.2793 5.0451L23.2984 5.02395V4.98432V4.94468L23.352 4.93148L23.4056 4.91831L23.4826 4.9255L23.5595 4.93271L23.5709 8.4602L23.5822 11.9877H25.3761H27.1701L27.1758 6.00756L27.1815 0.0273969L27.1077 0.0140211L27.0338 0.00062349L25.3194 0.00785679L23.6049 0.0150894L23.4687 0.073866L23.3324 0.132666L23.1735 0.215812L23.0145 0.298981L22.9237 0.370666L22.8329 0.442328L22.7132 0.563175L22.5935 0.684023L22.4945 0.813683L22.3956 0.943344L22.3036 1.12419L22.2116 1.30506L22.1634 1.42566L22.1152 1.54629L22.0735 1.63709L22.0318 1.72792L21.9811 1.85032L21.9304 1.97273L21.8855 2.07288L21.8407 2.17303L21.8065 2.25092L21.7723 2.32881L21.7542 2.37332L21.736 2.41784L21.691 2.51799L21.6459 2.61814L21.5844 2.7628L21.5228 2.90746L21.4938 2.97422L21.4648 3.04099L21.4032 3.18565L21.3415 3.33031L21.3116 3.39708L21.2817 3.46384L21.1752 3.71978L21.0686 3.97572L21.0026 4.11637L20.9367 4.25703V4.26593V4.27486L20.8824 4.39234L20.828 4.50985L20.745 4.71015L20.6619 4.91045L20.6312 4.97722L20.6005 5.04398L20.5394 5.18864L20.4783 5.3333L20.4491 5.40007L20.4199 5.46684L20.3694 5.58924L20.3189 5.71165L20.2898 5.77841L20.2608 5.84518L20.2105 5.95646L20.1603 6.06774L20.1284 6.14007L20.0966 6.2124L20.0644 6.28473L20.0323 6.35706L19.9482 6.55736L19.864 6.75766L19.824 6.84668L19.784 6.9357L19.7565 7.00643L19.7291 7.07716L19.7028 7.08517L19.6765 7.09318L19.5856 7.09209L19.4948 7.091L19.4892 3.57488L19.4836 0.0587548L19.4451 0.0309354L19.4066 0.00311609L17.6795 0.00451793L15.9524 0.00594286L15.9012 0.026084ZM28.2408 0.0184276L28.1988 0.0294888L28.2113 0.0997496L28.2238 0.170032L28.2373 0.247926L28.2509 0.325821L28.275 0.42597L28.299 0.52612L28.3283 0.615142L28.3575 0.704164L28.3852 0.804313L28.4129 0.904463L28.4356 0.97123L28.4584 1.038L28.4864 1.10476L28.5144 1.17153L28.5428 1.24942L28.5712 1.32732L28.5893 1.37183L28.6074 1.41634L28.6463 1.50536L28.6853 1.59438L28.7877 1.79468L28.89 1.99498L28.9835 2.15077L29.077 2.30656L29.1 2.3427L29.1229 2.37884L29.2075 2.49849L29.2922 2.61814L29.3318 2.67377L29.3713 2.72941L29.5079 2.89539L29.6445 3.0614L29.9287 3.3424L30.2129 3.62341L30.3132 3.69942L30.4134 3.77542L30.4381 3.79917L30.4627 3.82291L30.6671 3.9674L30.8714 4.11188L31.0645 4.22231L31.2575 4.33274L31.4732 4.43536L31.6889 4.53798L31.7684 4.57096L31.8479 4.60395L31.9387 4.639L32.0295 4.67405L32.1204 4.70058L32.2112 4.72711L32.2907 4.75602L32.3702 4.78491L32.5632 4.8292L32.7562 4.87351L32.9606 4.90963L33.1649 4.94577L33.5396 4.96624L33.9143 4.98672L36.8819 4.98754L39.8494 4.98834L39.9065 4.96709L39.9635 4.94584L39.9817 4.86138L40 4.77692V4.09812V3.41933L39.9593 3.26354L39.9185 3.10776L39.8943 3.00761L39.8701 2.90746L39.8014 2.70716L39.7327 2.50686L39.6882 2.40671L39.6438 2.30656L39.5627 2.15077L39.4815 1.99498L39.4371 1.9172L39.3928 1.83942L39.3225 1.73916L39.2522 1.63889L39.1233 1.47198L38.9944 1.30506L38.8387 1.14881L38.6829 0.992573L38.5608 0.892868L38.4386 0.793186L38.4104 0.766657L38.3822 0.740129L38.1956 0.618347L38.0089 0.496587L37.7555 0.374137L37.5021 0.251688L37.3205 0.19044L37.1388 0.129215L37.0593 0.111901L36.9799 0.0945641L36.8323 0.0559953L36.6847 0.0174265L32.4837 0.0124189L28.2827 0.00738884L28.2408 0.0184276ZM28.7283 5.44133L28.7027 5.47158L28.7084 8.72962L28.7142 11.9877L30.4741 11.9938L32.2339 12L32.285 11.9878L32.3361 11.9757V10.0961V8.2165L34.4422 8.20753L36.5484 8.19859L36.696 8.17497L36.8436 8.15136L36.9685 8.12045L37.0934 8.08953L37.1275 8.07767L37.1615 8.06581L37.2864 8.02742L37.4113 7.98905L37.4567 7.97091L37.5021 7.95275L37.6157 7.90092L37.7292 7.84906L37.7633 7.83749L37.7973 7.82592L37.9449 7.74155L38.0925 7.6572L38.1373 7.63027L38.182 7.60336L38.3439 7.48884L38.5058 7.37433L38.7343 7.155L38.9629 6.9357L39.1129 6.75098L39.2629 6.56628L39.3362 6.4429L39.4096 6.31953L39.46 6.23814L39.5104 6.15676L39.5994 5.97871L39.6883 5.80067L39.7508 5.64664L39.8132 5.49261L39.7906 5.45747L39.768 5.42233L34.2609 5.41672L28.7539 5.41111L28.7283 5.44133Z" fill="#F8F9FA"/>
                                </svg>
                                    
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h6>Кредиты</h6>
                    <div *ngIf="credits?.length; else noData">
                        <div *ngFor="let credit of credits" fxFlex="240px" class="item credit">
                            <div>{{credit.name}}</div>
                            <div style="font-size: 20px;">{{credit.amount}} ₽</div>
                            <div style="font-size: 14px;"> Еж. платеж: {{credit.monthlyPaymentAmount}}₽</div>
                        </div>
                    </div>
                </div>

                <ng-template #noData>
                    <div>Нет данных</div>
                </ng-template>
            </ng-container>

            <div fxLayout="column">
                <h6>Заявки</h6>
                <div fxLayout="row wrap">
                    <div *ngFor="let x of requests" fxFlex="240px"
                    [style.background-color]="x.status == 'APPROVED' ? 'rgba(25, 135, 84, 0.2)' : 'rgb(217 47 47 / 20%)'"
                    class="item">
                        <div fxLayout="row">
                            <div>{{LendingTypeExt.getName(x.lendingType)}}</div>
                            <div fxFlex></div>

                            <button mat-icon-button [matMenuTriggerFor]="menu" 
                            style="position: absolute; top: 6px; right: 0; min-width: 24px; min-width: 36px; width: 36px; align-items: center; display: flex;">
                                <mat-icon>more_horiz</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item (click)="viewRequest(x)">
                                <span>Открыть</span>
                                </button>
                                <button mat-menu-item (click)="download(x.id)">
                                    <span>Скачать результаты</span>
                                </button>
                                <button mat-menu-item (click)="delete(x)">
                                <span>Удалить</span>
                                </button>
                            </mat-menu>
                        </div>

                        <div style="font-size: 20px;">{{x.creditAmount}} ₽</div>

                        <div style="font-size: 14px; color: gray;">
                            <div>
                                {{x.status == 'APPROVED' ? 'Одобрено' : x.status == 'IN_PROGRESS' ? 'Рассматривается' : 'Отказано'}}
                            </div>
                            <div>{{x.applicationDateTime | date:'dd.MM.yyyy HH:mm:ss'}}</div>
                        </div>
                    </div>

                    <div fxFlex="240px" fxLayout="column" matRipple (click)="createRequest()" class="item add-button">
                        <div fxFlex fxLayoutAlign="center center">
                            <mat-icon>
                                <span class="material-symbols-outlined">
                                    add
                                </span>
                            </mat-icon>
                        </div>
                        <div fxLayoutAlign="center center"> Создать новую заявку </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>