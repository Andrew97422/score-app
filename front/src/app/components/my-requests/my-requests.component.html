<div class="component">
    <div fxLayout="row" fxFlex>
    
        <div fxFlex fxLayout="column" fxLayoutGap="8px">
            <h5>Мои заявки</h5>

            <div fxFlex fxLayout="column" fxLayoutGap="8px" style="overflow: auto;">
                <div fxLayout="row" class="requests-header" matRipple #consumers_exp (click)="consumers_exp.checked=!consumers_exp.checked">
                    <mat-icon>
                        <span class="material-symbols-outlined">
                            {{consumers_exp.checked ? 'chevron_right' : 'expand_more'}}
                        </span>
                    </mat-icon>
                    <div class="title">Мои заявки на кредит</div>
                </div>
                <table *ngIf="!consumers_exp.checked">
                    <tr>
                        <th>Название</th>
                        <th>Дата
                            <mat-icon #sorting (click)="sorting.direction = !sorting.direction; sort(LendingType.CONSUMER, sorting.direction)">
                                <span class="material-symbols-outlined">
                                    {{sorting.direction ? 'arrow_upward' : 'arrow_downward'}}
                                </span>
                            </mat-icon>
                        </th>
                        <th>Сумма кредита</th>
                        <th>Статус</th>
                        <th>Источник</th>
                        <th></th>
                        <th></th>
                    </tr>

                    <tr *ngFor="let x of consumers" [style.color]="x.status == 'APPROVED' ? 'seagreen' : x.status == 'IN_PROGRESS' ? '#3f51b5' : 'red'" (dblclick)="viewRequest(x)">
                        <td>
                            <div fxLayout="row" fxLayoutGap="4px">
                                <ng-container *ngIf="x.status == 'APPROVED'">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                        fill="seagreen"/>
                                    </svg>
                                </ng-container>

                                <ng-container *ngIf="x.status == 'IN_PROGRESS'">
                                    <mat-icon>
                                        <span class="material-symbols-outlined">
                                            schedule
                                        </span>
                                    </mat-icon>
                                </ng-container>

                                <ng-container *ngIf="x.status == 'DENIED'">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                        fill="red"/>
                                    </svg>
                                </ng-container>

                                <div>{{LendingTypeExt.getName(x.application.lendingType)}}</div>
                            </div>
                        </td>
                        <td><div>{{getDateTime(x.application)}}</div></td>
                        <td><div>{{x.application.creditAmount}}</div></td>
                        <td><div>{{x.status == 'APPROVED' ? 'Одобрено' : x.status == 'IN_PROGRESS' ? 'В процессе' : 'Отказано'}}</div></td>
                        <td><div><a href="http://localhost:4200/shop">http://localhost:4200/shop</a></div></td>
                        <td>     
                            <svg (click)="download(x.application.id)"
                            xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/></svg>                          
                        </td>
                        <td>                            
                            <mat-icon (click)="delete(x.application)">
                                <span class="material-symbols-outlined">
                                    delete
                                </span>
                            </mat-icon>
                        </td>
                    </tr>
                </table>

                <div fxLayout="row" class="requests-header" matRipple #autoLoans_exp (click)="autoLoans_exp.checked=!autoLoans_exp.checked">
                    <mat-icon>
                        <span class="material-symbols-outlined">
                            {{autoLoans_exp.checked ? 'chevron_right' : 'expand_more'}}
                        </span>
                    </mat-icon>
                    <div class="title">Мои заявки на  автокридит</div>
                </div>
        
                <table *ngIf="!autoLoans_exp.checked">
                    <tr>
                        <th>Название</th>
                        <th>Дата

                            <mat-icon #sorting (click)="sorting.direction = !sorting.direction; sort(LendingType.AUTO_LOAN, sorting.direction)">
                                <span class="material-symbols-outlined">
                                    {{sorting.direction ? 'arrow_upward' : 'arrow_downward'}}
                                </span>
                            </mat-icon>
                        </th>
                        <th>Сумма кредита</th>
                        <th>Статус</th>
                        <th>Источник</th>
                        <th></th>
                        <th></th>
                    </tr>

                    <tr *ngFor="let x of autoLoans" [style.color]="x.status == 'APPROVED' ? 'seagreen' : x.status == 'IN_PROGRESS' ? '#3f51b5' : 'red'"
                    (dblclick)="viewRequest(x)">
                        <td>
                            <div fxLayout="row" fxLayoutGap="4px">
                                <ng-container *ngIf="x.status == 'APPROVED'">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                        fill="seagreen"/>
                                    </svg>
                                </ng-container>

                                <ng-container *ngIf="x.status == 'IN_PROGRESS'">
                                    <mat-icon>
                                        <span class="material-symbols-outlined">
                                            schedule
                                        </span>
                                    </mat-icon>
                                </ng-container>

                                <ng-container *ngIf="x.status == 'DENIED'">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                        fill="red"/>
                                    </svg>
                                </ng-container>

                                <div>{{LendingTypeExt.getName(x.application.lendingType)}}</div>
                            </div>
                        </td>
                        <td><div>{{getDateTime(x.application)}}</div></td>
                        <td><div>{{x.application.creditAmount}}</div></td>
                        <td><div>{{x.status == 'APPROVED' ? 'Одобрено' : x.status == 'IN_PROGRESS' ? 'В процессе' : 'Отказано'}}</div></td>
                        <td><div><a href="http://localhost:4200/shop">http://localhost:4200/shop</a></div></td>
                        <td>     
                            <svg (click)="download(x.application.id)"
                            xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/></svg>                          
                        </td>
                        <td>                                
                            <mat-icon (click)="delete(x.application)">
                                <span class="material-symbols-outlined">
                                    delete
                                </span>
                            </mat-icon>
                        </td>
                    </tr>
                </table>

                <div fxLayout="row" class="requests-header" matRipple #mortgages_exp (click)="mortgages_exp.checked=!mortgages_exp.checked">
                    <mat-icon>
                        <span class="material-symbols-outlined">
                            {{mortgages_exp.checked ? 'chevron_right' : 'expand_more'}}
                        </span>
                    </mat-icon>
                    <div class="title">Мои заявки на ипотеку</div>
                </div>
                
                <table *ngIf="!mortgages_exp.checked">
                    <tr>
                        <th>Название</th>
                        <th>Дата

                            <mat-icon #sorting (click)="sorting.direction = !sorting.direction; sort(LendingType.MORTGAGE, sorting.direction)">
                                <span class="material-symbols-outlined">
                                    {{sorting.direction ? 'arrow_upward' : 'arrow_downward'}}
                                </span>
                            </mat-icon>
                        </th>
                        <th>Сумма кредита</th>
                        <th>Статус</th>
                        <th>Источник</th>
                        <th></th>
                        <th></th>
                    </tr>

                    <tr *ngFor="let x of mortgages" [style.color]="x.status == 'APPROVED' ? 'seagreen' : x.status == 'IN_PROGRESS' ? '#3f51b5' : 'red'"
                    (dblclick)="viewRequest(x)">
                        <td>
                            <div fxLayout="row" fxLayoutGap="4px">
                                <ng-container *ngIf="x.status == 'APPROVED'">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                        fill="seagreen"/>
                                    </svg>
                                </ng-container>

                                <ng-container *ngIf="x.status == 'IN_PROGRESS'">
                                    <mat-icon>
                                        <span class="material-symbols-outlined">
                                            schedule
                                        </span>
                                    </mat-icon>
                                </ng-container>

                                <ng-container *ngIf="x.status == 'DENIED'">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
                                        fill="red"/>
                                    </svg>
                                </ng-container>

                                <div>{{LendingTypeExt.getName(x.application.lendingType)}}</div>
                            </div>
                        </td>
                        <td><div>{{getDateTime(x.application)}}</div></td>
                        <td><div>{{x.application.creditAmount}}</div></td>
                        <td><div>{{x.status == 'APPROVED' ? 'Одобрено' : x.status == 'IN_PROGRESS' ? 'В процессе' : 'Отказано'}}</div></td>
                        <td><div><a href="http://localhost:4200/shop">http://localhost:4200/shop</a></div></td>
                        <td>     
                            <svg (click)="download(x.application.id)"
                            xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/></svg>                          
                        </td>
                        <td>                                
                            <mat-icon (click)="delete(x.application)">
                                <span class="material-symbols-outlined">
                                    delete
                                </span>
                            </mat-icon>
                        </td>
                    </tr>
                </table>
            </div>

            <!--
            <div>
                <button mat-button (click)="createRequest()" color="primary" style="background-color: #3f51b521;">
                    Добавить заявку
                </button>
            </div>-->
        </div>
    </div>
</div>